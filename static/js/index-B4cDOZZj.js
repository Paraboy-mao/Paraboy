import{l as e}from"./index-EwfiPtIx.js";import{a}from"./ElementPlus-heS2Cq9L.js";import{l,a as t,Z as r,ah as o,ap as d,m as n,p as u,U as s,O as m,S as p,u as i,P as v,M as c,q as g,T as f}from"./vue-K7LtoPyd.js";import"./axios-dB_UgXDe.js";const b={class:"dialog-footer"},V=l({__name:"index",setup(l){const V=t(!1);let _=r({pageNo:1,pageSize:10}),C=t({});const y=t(0),S=t(!1),h=t([]),U=()=>{var l;C.value.id?(a=>e.post("/serverManagement/updateServerManagementById",a))(C.value).then((e=>{V.value=!1,z(),a({type:e.data?"success":"error",message:e.data?"修改成功":"修改失败"})})):(l=C.value,e.post("/serverManagement/addServerManagement",l)).then((e=>{V.value=!1,z(),a({type:e.data?"success":"error",message:e.data?"创建成功":"创建失败"})}))};function j(e){C.value=e.id?{...e}:{},V.value=!0}function z(){var a;S.value=!0,(a=_,e.post("/serverManagement/findServerManagementPage",a)).then((e=>{h.value=e.data.records,y.value=e.data.total,S.value=!1}))}function M(l){var t;(t={id:l},e.post("/serverManagement/removeServerManagementById",{},{params:t})).then((e=>{z(),a({type:e.data?"success":"error",message:e.data?"删除成功":"删除失败"})}))}return z(),(e,a)=>{const l=o("el-button"),t=o("el-form-item"),r=o("el-form"),N=o("el-table-column"),w=o("el-popconfirm"),x=o("el-table"),k=o("el-pagination"),P=o("el-input"),D=o("el-radio"),B=o("el-radio-group"),I=o("el-dialog"),q=d("loading");return n(),u("div",null,[s(r,{inline:!0,model:i(_)},{default:m((()=>[s(t,null,{default:m((()=>[s(l,{type:"primary",onClick:z},{default:m((()=>[p("搜索")])),_:1}),s(l,{type:"success",onClick:j},{default:m((()=>[p("新增")])),_:1})])),_:1})])),_:1},8,["model"]),v((n(),c(x,{data:h.value,style:{width:"100%","margin-bottom":"20px"},border:""},{default:m((()=>[s(N,{prop:"projectName",label:"项目名称-中文名",align:"center"}),s(N,{prop:"projectCode",label:"项目编码-英文名",align:"center"}),s(N,{prop:"serverCode",label:"（同项目唯一）服务编码",align:"center"}),s(N,{prop:"serverName",label:"服务名称-中文名",align:"center"}),s(N,{prop:"serverPort",label:"服务端口",align:"center"}),s(N,{prop:"serverDescribe",label:"服务描述",align:"center"}),s(N,{prop:"serverStartCommand",label:"服务启动命令",align:"center"}),s(N,{label:"是否启用",align:"center"},{default:m((e=>[g("span",null,f(2==e.row.serverState?"启用":"停用"),1)])),_:1}),s(N,{label:"操作",width:"220",align:"center"},{default:m((e=>[s(l,{type:"primary",size:"small",onClick:a=>j(e.row)},{default:m((()=>[p("编辑")])),_:2},1032,["onClick"]),s(w,{title:"Are you sure to delete this?",onConfirm:a=>M(e.row.id)},{reference:m((()=>[s(l,{type:"danger",size:"small"},{default:m((()=>[p("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[q,S.value]]),s(k,{"current-page":i(_).pageNo,"onUpdate:currentPage":a[0]||(a[0]=e=>i(_).pageNo=e),"page-size":i(_).pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>i(_).pageSize=e),background:!0,layout:"total, sizes, prev, pager, next, jumper",total:y.value,onSizeChange:z,onCurrentChange:z},null,8,["current-page","page-size","total"]),s(I,{modelValue:V.value,"onUpdate:modelValue":a[11]||(a[11]=e=>V.value=e),title:"操作",width:"600"},{footer:m((()=>[g("div",b,[s(l,{onClick:a[10]||(a[10]=e=>V.value=!1)},{default:m((()=>[p("取消")])),_:1}),s(l,{type:"primary",onClick:U},{default:m((()=>[p("确定")])),_:1})])])),default:m((()=>[s(r,{model:i(C),"label-width":"auto",style:{"max-width":"600px"}},{default:m((()=>[s(t,{label:"项目名称-中文名"},{default:m((()=>[s(P,{modelValue:i(C).projectName,"onUpdate:modelValue":a[2]||(a[2]=e=>i(C).projectName=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"项目编码-英文名"},{default:m((()=>[s(P,{modelValue:i(C).projectCode,"onUpdate:modelValue":a[3]||(a[3]=e=>i(C).projectCode=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"（同项目唯一）服务编码"},{default:m((()=>[s(P,{modelValue:i(C).serverCode,"onUpdate:modelValue":a[4]||(a[4]=e=>i(C).serverCode=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"服务名称-中文名"},{default:m((()=>[s(P,{modelValue:i(C).serverName,"onUpdate:modelValue":a[5]||(a[5]=e=>i(C).serverName=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"服务端口"},{default:m((()=>[s(P,{modelValue:i(C).serverPort,"onUpdate:modelValue":a[6]||(a[6]=e=>i(C).serverPort=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"服务描述"},{default:m((()=>[s(P,{modelValue:i(C).serverDescribe,"onUpdate:modelValue":a[7]||(a[7]=e=>i(C).serverDescribe=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"服务启动命令"},{default:m((()=>[s(P,{modelValue:i(C).serverStartCommand,"onUpdate:modelValue":a[8]||(a[8]=e=>i(C).serverStartCommand=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"是否启用"},{default:m((()=>[s(B,{modelValue:i(C).serverState,"onUpdate:modelValue":a[9]||(a[9]=e=>i(C).serverState=e)},{default:m((()=>[s(D,{value:2},{default:m((()=>[p("启用")])),_:1}),s(D,{value:1},{default:m((()=>[p("停用")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{V as default};
