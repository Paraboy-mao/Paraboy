import{l as e}from"./index-9F9TBnAc.js";import{b as a}from"./projectManagement-BSPCmzUb.js";import{l,a as t,ah as o,ap as r,m as n,p,U as s,O as u,F as d,a7 as i,M as m,S as c,P as v,q as b,T as f}from"./vue-K7LtoPyd.js";import"./ElementPlus-heS2Cq9L.js";import"./axios-dB_UgXDe.js";const j=l({__name:"index",setup(l){const j=t(!1),g=t({}),C=t([]),w=t([]);function _(){var a;j.value=!0,(a=g.value,e.post("/serverOperationManagement/findServerOperationState",{},{params:a})).then((e=>{C.value=e.data,j.value=!1}))}return a({}).then((e=>{var a,l;w.value=e.data,(null==(a=e.data[0])?void 0:a.projectCode)&&(g.value.projectCode=null==(l=e.data[0])?void 0:l.projectCode,_())})),(e,a)=>{const l=o("el-option"),t=o("el-select"),h=o("el-form-item"),x=o("el-button"),y=o("el-form"),N=o("el-table-column"),M=o("el-table"),O=r("loading");return n(),p("div",null,[s(y,{inline:!0,model:g.value},{default:u((()=>[s(h,{label:"项目"},{default:u((()=>[s(t,{modelValue:g.value.projectCode,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value.projectCode=e),placeholder:"选择项目",style:{width:"200px"},onChange:_},{default:u((()=>[(n(!0),p(d,null,i(w.value,(e=>(n(),m(l,{key:e.projectCode,label:e.projectName,value:e.projectCode},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(h,null,{default:u((()=>[s(x,{type:"primary",onClick:_},{default:u((()=>[c("搜索")])),_:1})])),_:1})])),_:1},8,["model"]),v((n(),m(M,{data:C.value,style:{width:"100%","margin-bottom":"20px"},border:""},{default:u((()=>[s(N,{prop:"serverName",label:"服务名称-中文名",align:"center"}),s(N,{prop:"serverCode",label:"（同项目唯一）服务编码-英文名",align:"center",width:"300"}),s(N,{prop:"projectName",label:"项目名称-中文名",align:"center"}),s(N,{prop:"projectCode",label:"项目编码-英文名",align:"center","show-overflow-tooltip":""}),s(N,{label:"版本号",align:"center"},{default:u((e=>[b("span",null,f(0==e.row.state?"上次运行版本":"当前版本")+"："+f(e.row.versionNumber),1)])),_:1}),s(N,{prop:"serverPort",label:"服务端口",align:"center"}),s(N,{label:"状态",align:"center"},{default:u((e=>[b("span",null,f(e.row.state?0==e.row.state?"已停止":"运行中":e.row.state),1)])),_:1}),s(N,{prop:"createDate",label:"创建时间",align:"center"})])),_:1},8,["data"])),[[O,j.value]])])}}});export{j as default};
