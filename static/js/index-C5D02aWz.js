import{l as e}from"./index-EwfiPtIx.js";import{a as l}from"./ElementPlus-heS2Cq9L.js";import{l as a,a as t,Z as o,ah as r,ap as u,m as d,p as n,U as p,O as s,S as i,u as c,P as m,M as g,q as f,T as j}from"./vue-K7LtoPyd.js";import"./axios-dB_UgXDe.js";const v={class:"dialog-footer"},V=a({__name:"index",setup(a){const V=t(!1);let b=o({pageNo:1,pageSize:10}),_=t({});const P=t(0),h=t(!1),w=t([]),U=()=>{var a;_.value.id?(l=>e.post("/projectManagement/updateProjectManagementById",l))(_.value).then((e=>{V.value=!1,y(),l({type:e.data?"success":"error",message:e.data?"修改成功":"修改失败"})})):(a=_.value,e.post("/projectManagement/addProjectManagement",a)).then((e=>{V.value=!1,y(),l({type:e.data?"success":"error",message:e.data?"创建成功":"创建失败"})}))};function S(e){_.value=e.id?{...e}:{},V.value=!0}function y(){var l;h.value=!0,(l=b,e.post("/projectManagement/findProjectManagementPage",l)).then((e=>{w.value=e.data.records,P.value=e.data.total,h.value=!1}))}function C(a){var t;(t={id:a},e.post("/projectManagement/removeProjectManagementById",{},{params:t})).then((e=>{y(),l({type:e.data?"success":"error",message:e.data?"删除成功":"删除失败"})}))}return y(),(e,l)=>{const a=r("el-button"),t=r("el-form-item"),o=r("el-form"),z=r("el-table-column"),D=r("el-popconfirm"),M=r("el-table"),x=r("el-pagination"),k=r("el-input"),N=r("el-radio"),G=r("el-radio-group"),B=r("el-dialog"),I=u("loading");return d(),n("div",null,[p(o,{inline:!0,model:c(b)},{default:s((()=>[p(t,null,{default:s((()=>[p(a,{type:"primary",onClick:y},{default:s((()=>[i("搜索")])),_:1}),p(a,{type:"success",onClick:S},{default:s((()=>[i("新增")])),_:1})])),_:1})])),_:1},8,["model"]),m((d(),g(M,{data:w.value,style:{width:"100%","margin-bottom":"20px"},border:""},{default:s((()=>[p(z,{prop:"projectName",label:"项目名称-中文名",align:"center"}),p(z,{prop:"projectCode",label:"项目编码-英文名",align:"center"}),p(z,{prop:"projectDescribe",label:"项目描述",align:"center"}),p(z,{prop:"projectGitUrl",label:"项目git地址",align:"center","show-overflow-tooltip":""}),p(z,{prop:"projectPullDepositPath",label:"项目拉取存放路径",align:"center","show-overflow-tooltip":""}),p(z,{prop:"projectPullUsername",label:"项目拉取用户名",align:"center"}),p(z,{prop:"projectPullPassword",label:"项目拉取密码",align:"center"}),p(z,{prop:"projectServerSideDepositPath",label:"项目服务器端存放路径",align:"center","show-overflow-tooltip":""}),p(z,{label:"是否启用",align:"center"},{default:s((e=>[f("span",null,j(e.row.projectState?1==e.row.projectState?"未启用":2==e.row.projectState?"已启用":"已终止":e.row.projectState),1)])),_:1}),p(z,{label:"操作",width:"220",align:"center"},{default:s((e=>[p(a,{type:"primary",size:"small",onClick:l=>S(e.row)},{default:s((()=>[i("编辑")])),_:2},1032,["onClick"]),p(D,{title:"Are you sure to delete this?",onConfirm:l=>C(e.row.id)},{reference:s((()=>[p(a,{type:"danger",size:"small"},{default:s((()=>[i("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[I,h.value]]),p(x,{"current-page":c(b).pageNo,"onUpdate:currentPage":l[0]||(l[0]=e=>c(b).pageNo=e),"page-size":c(b).pageSize,"onUpdate:pageSize":l[1]||(l[1]=e=>c(b).pageSize=e),background:!0,layout:"total, sizes, prev, pager, next, jumper",total:P.value,onSizeChange:y,onCurrentChange:y},null,8,["current-page","page-size","total"]),p(B,{modelValue:V.value,"onUpdate:modelValue":l[12]||(l[12]=e=>V.value=e),title:"操作",width:"600"},{footer:s((()=>[f("div",v,[p(a,{onClick:l[11]||(l[11]=e=>V.value=!1)},{default:s((()=>[i("取消")])),_:1}),p(a,{type:"primary",onClick:U},{default:s((()=>[i("确定")])),_:1})])])),default:s((()=>[p(o,{model:c(_),"label-width":"auto",style:{"max-width":"600px"}},{default:s((()=>[p(t,{label:"项目名称-中文名"},{default:s((()=>[p(k,{modelValue:c(_).projectName,"onUpdate:modelValue":l[2]||(l[2]=e=>c(_).projectName=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"项目编码-英文名"},{default:s((()=>[p(k,{modelValue:c(_).projectCode,"onUpdate:modelValue":l[3]||(l[3]=e=>c(_).projectCode=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"服务描述"},{default:s((()=>[p(k,{modelValue:c(_).serverDescribe,"onUpdate:modelValue":l[4]||(l[4]=e=>c(_).serverDescribe=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"项目git地址"},{default:s((()=>[p(k,{modelValue:c(_).projectGitUrl,"onUpdate:modelValue":l[5]||(l[5]=e=>c(_).projectGitUrl=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"项目拉取存放路径"},{default:s((()=>[p(k,{modelValue:c(_).projectPullDepositPath,"onUpdate:modelValue":l[6]||(l[6]=e=>c(_).projectPullDepositPath=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"项目拉取用户名"},{default:s((()=>[p(k,{modelValue:c(_).projectPullUsername,"onUpdate:modelValue":l[7]||(l[7]=e=>c(_).projectPullUsername=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"项目拉取密码"},{default:s((()=>[p(k,{modelValue:c(_).projectPullPassword,"onUpdate:modelValue":l[8]||(l[8]=e=>c(_).projectPullPassword=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"项目服务器端存放路径"},{default:s((()=>[p(k,{modelValue:c(_).projectServerSideDepositPath,"onUpdate:modelValue":l[9]||(l[9]=e=>c(_).projectServerSideDepositPath=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"是否启用"},{default:s((()=>[p(G,{modelValue:c(_).projectState,"onUpdate:modelValue":l[10]||(l[10]=e=>c(_).projectState=e)},{default:s((()=>[p(N,{value:1},{default:s((()=>[i("未启用")])),_:1}),p(N,{value:2},{default:s((()=>[i("已启用")])),_:1}),p(N,{value:3},{default:s((()=>[i("已终止")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{V as default};
