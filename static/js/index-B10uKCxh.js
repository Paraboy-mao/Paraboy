import{l as e}from"./index-9F9TBnAc.js";import{b as a}from"./projectManagement-BSPCmzUb.js";import{a as l}from"./ElementPlus-heS2Cq9L.js";import{l as t,a as r,Z as o,ah as n,ap as u,m as d,p as s,U as p,O as m,S as i,u as v,P as c,M as g,q as f,T as b,F as _,a7 as C}from"./vue-K7LtoPyd.js";import"./axios-dB_UgXDe.js";const V={class:"dialog-footer"},y=t({__name:"index",setup(t){const y=r(!1);let j=o({pageNo:1,pageSize:10}),S=r({});const h=r(0),N=r(!1),U=r([]),z=r(""),M=r([]);function w(){var a;N.value=!0,(a=j,e.post("/serverManagement/findServerManagementPage",a)).then((e=>{U.value=e.data.records,h.value=e.data.total,N.value=!1}))}function k(){var a;S.value.id?(a=>e.post("/serverManagement/updateServerManagementById",a))(S.value).then((e=>{y.value=!1,w(),l({type:e.data?"success":"error",message:e.data?"修改成功":"修改失败"})})):(a=S.value,e.post("/serverManagement/addServerManagement",a)).then((e=>{y.value=!1,w(),l({type:e.data?"success":"error",message:e.data?"创建成功":"创建失败"})}))}function x(e){e.id?(S.value={...e},z.value=JSON.stringify({projectCode:e.projectCode,projectName:e.projectName})):(S.value={},z.value=""),y.value=!0}function P(a){var t;(t={id:a},e.post("/serverManagement/removeServerManagementById",{},{params:t})).then((e=>{w(),l({type:e.data?"success":"error",message:e.data?"删除成功":"删除失败"})}))}function O(e){let a=JSON.parse(e);S.value={...S.value,...a}}return a({}).then((e=>{M.value=e.data})),w(),(e,a)=>{const l=n("el-button"),t=n("el-form-item"),r=n("el-form"),o=n("el-table-column"),D=n("el-popconfirm"),J=n("el-table"),B=n("el-pagination"),E=n("el-option"),I=n("el-select"),q=n("el-input"),A=n("el-radio"),F=n("el-radio-group"),T=n("el-dialog"),Z=u("loading");return d(),s("div",null,[p(r,{inline:!0,model:v(j)},{default:m((()=>[p(t,null,{default:m((()=>[p(l,{type:"primary",onClick:w},{default:m((()=>[i("搜索")])),_:1}),p(l,{type:"success",onClick:x},{default:m((()=>[i("新增")])),_:1})])),_:1})])),_:1},8,["model"]),c((d(),g(J,{data:U.value,style:{width:"100%","margin-bottom":"20px"},border:""},{default:m((()=>[p(o,{prop:"projectName",label:"项目名称-中文名",align:"center"}),p(o,{prop:"projectCode",label:"项目编码-英文名",align:"center"}),p(o,{prop:"serverCode",label:"（同项目唯一）服务编码",align:"center"}),p(o,{prop:"serverName",label:"服务名称-中文名",align:"center"}),p(o,{prop:"serverPort",label:"服务端口",align:"center"}),p(o,{prop:"serverDescribe",label:"服务描述",align:"center"}),p(o,{prop:"serverStartCommand",label:"服务启动命令",align:"center"}),p(o,{label:"是否启用",align:"center"},{default:m((e=>[f("span",null,b(2==e.row.serverState?"启用":"停用"),1)])),_:1}),p(o,{label:"操作",width:"220",align:"center"},{default:m((e=>[p(l,{type:"primary",size:"small",onClick:a=>x(e.row)},{default:m((()=>[i("编辑")])),_:2},1032,["onClick"]),p(D,{title:"Are you sure to delete this?",onConfirm:a=>P(e.row.id)},{reference:m((()=>[p(l,{type:"danger",size:"small"},{default:m((()=>[i("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[Z,N.value]]),p(B,{"current-page":v(j).pageNo,"onUpdate:currentPage":a[0]||(a[0]=e=>v(j).pageNo=e),"page-size":v(j).pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>v(j).pageSize=e),background:!0,layout:"total, sizes, prev, pager, next, jumper",total:h.value,onSizeChange:w,onCurrentChange:w},null,8,["current-page","page-size","total"]),p(T,{modelValue:y.value,"onUpdate:modelValue":a[10]||(a[10]=e=>y.value=e),title:"操作",width:"600"},{footer:m((()=>[f("div",V,[p(l,{onClick:a[9]||(a[9]=e=>y.value=!1)},{default:m((()=>[i("取消")])),_:1}),p(l,{type:"primary",onClick:k},{default:m((()=>[i("确定")])),_:1})])])),default:m((()=>[p(r,{model:v(S),"label-width":"auto",style:{"max-width":"600px"}},{default:m((()=>[p(t,{label:"项目"},{default:m((()=>[p(I,{modelValue:z.value,"onUpdate:modelValue":a[2]||(a[2]=e=>z.value=e),placeholder:"选择项目",style:{width:"100%"},onChange:O},{default:m((()=>[(d(!0),s(_,null,C(M.value,(e=>(d(),g(E,{key:e.projectCode,label:e.projectName,value:JSON.stringify({projectCode:e.projectCode,projectName:e.projectName})},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),p(t,{label:"（同项目唯一）服务编码"},{default:m((()=>[p(q,{modelValue:v(S).serverCode,"onUpdate:modelValue":a[3]||(a[3]=e=>v(S).serverCode=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"服务名称-中文名"},{default:m((()=>[p(q,{modelValue:v(S).serverName,"onUpdate:modelValue":a[4]||(a[4]=e=>v(S).serverName=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"服务端口"},{default:m((()=>[p(q,{modelValue:v(S).serverPort,"onUpdate:modelValue":a[5]||(a[5]=e=>v(S).serverPort=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"服务描述"},{default:m((()=>[p(q,{modelValue:v(S).serverDescribe,"onUpdate:modelValue":a[6]||(a[6]=e=>v(S).serverDescribe=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"服务启动命令"},{default:m((()=>[p(q,{modelValue:v(S).serverStartCommand,"onUpdate:modelValue":a[7]||(a[7]=e=>v(S).serverStartCommand=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"是否启用"},{default:m((()=>[p(F,{modelValue:v(S).serverState,"onUpdate:modelValue":a[8]||(a[8]=e=>v(S).serverState=e)},{default:m((()=>[p(A,{value:2},{default:m((()=>[i("启用")])),_:1}),p(A,{value:1},{default:m((()=>[i("停用")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{y as default};
