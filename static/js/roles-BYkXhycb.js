import{s as e,f as l,r as a}from"./sysRole-ciOoaIRN.js";import{g as o,e as t}from"./index-9F9TBnAc.js";import{h as d,a as s}from"./ElementPlus-heS2Cq9L.js";import{l as r,a as u,Z as m,ah as n,m as i,p as f,U as p,O as c,S as y,q as _,u as h,n as v}from"./vue-K7LtoPyd.js";import"./axios-dB_UgXDe.js";const C={class:"dialog-footer"},b=r({__name:"roles",setup(r){const b=u(!1),V=m({roleName:""}),R=u([]);let k=m({sysRoleDo:{roleCode:"",roleName:"",roleStatus:"1"},menuIds:[]});const w={children:"children",label:"title"},D=u([]),x=u(),g=()=>{var l;k.menuIds=null==(l=x.value)?void 0:l.getCheckedKeys(),e(k).then((e=>{N(),b.value=!1,s({type:e.data?"success":"error",message:e.data?"创建成功":"创建失败"})}))},N=()=>{l({}).then((e=>{R.value=e.data}))};async function I(e){e.roleCode?await o({roleCode:e.roleCode}).then((l=>{k.sysRoleDo={...e},k.menuIds=[...l.data]})):(k.sysRoleDo={roleCode:"",roleName:"",roleStatus:"1"},k.menuIds=[]),b.value=!0,v((()=>{x.value.setCheckedKeys(k.menuIds)}))}return N(),t({}).then((e=>{D.value=e.data})),(e,l)=>{const o=n("el-input"),t=n("el-form-item"),s=n("el-button"),r=n("el-form"),u=n("el-table-column"),m=n("el-popconfirm"),v=n("el-table"),S=n("el-radio"),U=n("el-radio-group"),j=n("el-dialog");return i(),f("div",null,[p(r,{inline:!0,model:V},{default:c((()=>[p(t,{label:"角色名称"},{default:c((()=>[p(o,{modelValue:V.roleName,"onUpdate:modelValue":l[0]||(l[0]=e=>V.roleName=e),placeholder:"角色名称",clearable:""},null,8,["modelValue"])])),_:1}),p(t,null,{default:c((()=>[p(s,{type:"primary",onClick:N},{default:c((()=>[y("搜索")])),_:1}),p(s,{type:"success",onClick:I},{default:c((()=>[y("新增")])),_:1})])),_:1})])),_:1},8,["model"]),p(v,{data:R.value,style:{width:"100%"},border:""},{default:c((()=>[p(u,{prop:"roleName",label:"角色名称"}),p(u,{prop:"roleCode",label:"角色编码"}),p(u,{prop:"roleStatus",label:"角色状态"}),p(u,{fixed:"right",label:"操作",width:"220",align:"center"},{default:c((e=>[p(s,{type:"primary",size:"small",onClick:l=>I(e.row)},{default:c((()=>[y("编辑")])),_:2},1032,["onClick"]),p(m,{title:"Are you sure to delete this?",onConfirm:l=>{return o={roleCode:e.row.roleCode},void a(o).then((e=>{N()}));var o}},{reference:c((()=>[p(s,{type:"danger",size:"small"},{default:c((()=>[y("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),p(j,{modelValue:b.value,"onUpdate:modelValue":l[5]||(l[5]=e=>b.value=e),title:"新增",width:"600"},{footer:c((()=>[_("div",C,[p(s,{onClick:l[4]||(l[4]=e=>b.value=!1)},{default:c((()=>[y("取消")])),_:1}),p(s,{type:"primary",onClick:g},{default:c((()=>[y("确定")])),_:1})])])),default:c((()=>[p(r,{model:h(k).sysRoleDo,"label-width":"auto",style:{"max-width":"600px"}},{default:c((()=>[p(t,{label:"角色名称"},{default:c((()=>[p(o,{modelValue:h(k).sysRoleDo.roleName,"onUpdate:modelValue":l[1]||(l[1]=e=>h(k).sysRoleDo.roleName=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"角色编码"},{default:c((()=>[p(o,{modelValue:h(k).sysRoleDo.roleCode,"onUpdate:modelValue":l[2]||(l[2]=e=>h(k).sysRoleDo.roleCode=e)},null,8,["modelValue"])])),_:1}),p(t,{label:"角色状态"},{default:c((()=>[p(U,{modelValue:h(k).sysRoleDo.roleStatus,"onUpdate:modelValue":l[3]||(l[3]=e=>h(k).sysRoleDo.roleStatus=e)},{default:c((()=>[p(S,{value:"1"},{default:c((()=>[y("启用")])),_:1}),p(S,{value:"0"},{default:c((()=>[y("停用")])),_:1})])),_:1},8,["modelValue"])])),_:1}),p(t,{label:"角色权限"},{default:c((()=>[p(h(d),{ref_key:"treeRef",ref:x,style:{"max-width":"600px","min-width":"300px"},data:D.value,"show-checkbox":"","node-key":"menuId",props:w},null,8,["data"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{b as default};
