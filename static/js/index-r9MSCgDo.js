import{f as e,a as l,u as a,r as t}from"./projectManagement-BSPCmzUb.js";import{a as o}from"./ElementPlus-heS2Cq9L.js";import{l as r,a as u,Z as d,ah as p,ap as n,m as i,p as s,U as c,O as m,S as f,u as g,P as j,M as v,q as V,T as b}from"./vue-K7LtoPyd.js";import"./index-9F9TBnAc.js";import"./axios-dB_UgXDe.js";const _={class:"dialog-footer"},h=r({__name:"index",setup(r){const h=u(!1);let w=d({pageNo:1,pageSize:10}),P=u({});const U=u(0),S=u(!1),y=u([]);function C(){S.value=!0,e(w).then((e=>{y.value=e.data.records,U.value=e.data.total,S.value=!1}))}function z(){P.value.id?a(P.value).then((e=>{h.value=!1,C(),o({type:e.data?"success":"error",message:e.data?"修改成功":"修改失败"})})):l(P.value).then((e=>{h.value=!1,C(),o({type:e.data?"success":"error",message:e.data?"创建成功":"创建失败"})}))}function D(e){P.value=e.id?{...e}:{},h.value=!0}return C(),(e,l)=>{const a=p("el-button"),r=p("el-form-item"),u=p("el-form"),d=p("el-table-column"),x=p("el-popconfirm"),k=p("el-table"),N=p("el-pagination"),G=p("el-input"),E=p("el-radio"),M=p("el-radio-group"),q=p("el-dialog"),A=n("loading");return i(),s("div",null,[c(u,{inline:!0,model:g(w)},{default:m((()=>[c(r,null,{default:m((()=>[c(a,{type:"primary",onClick:C},{default:m((()=>[f("搜索")])),_:1}),c(a,{type:"success",onClick:D},{default:m((()=>[f("新增")])),_:1})])),_:1})])),_:1},8,["model"]),j((i(),v(k,{data:y.value,style:{width:"100%","margin-bottom":"20px"},border:""},{default:m((()=>[c(d,{prop:"projectName",label:"项目名称-中文名",align:"center"}),c(d,{prop:"projectCode",label:"项目编码-英文名",align:"center"}),c(d,{prop:"projectDescribe",label:"项目描述",align:"center"}),c(d,{prop:"projectGitUrl",label:"项目git地址",align:"center","show-overflow-tooltip":""}),c(d,{prop:"projectPullDepositPath",label:"项目拉取存放路径",align:"center","show-overflow-tooltip":""}),c(d,{prop:"projectPullUsername",label:"项目拉取用户名",align:"center"}),c(d,{prop:"projectPullPassword",label:"项目拉取密码",align:"center"}),c(d,{prop:"projectServerSideDepositPath",label:"项目服务器端存放路径",align:"center","show-overflow-tooltip":"",width:"200"}),c(d,{label:"是否启用",align:"center"},{default:m((e=>[V("span",null,b(e.row.projectState?1==e.row.projectState?"未启用":2==e.row.projectState?"已启用":"已终止":e.row.projectState),1)])),_:1}),c(d,{label:"操作",width:"220",align:"center"},{default:m((e=>[c(a,{type:"primary",size:"small",onClick:l=>D(e.row)},{default:m((()=>[f("编辑")])),_:2},1032,["onClick"]),c(x,{title:"Are you sure to delete this?",onConfirm:l=>{return a=e.row.id,void t({id:a}).then((e=>{C(),o({type:e.data?"success":"error",message:e.data?"删除成功":"删除失败"})}));var a}},{reference:m((()=>[c(a,{type:"danger",size:"small"},{default:m((()=>[f("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[A,S.value]]),c(N,{"current-page":g(w).pageNo,"onUpdate:currentPage":l[0]||(l[0]=e=>g(w).pageNo=e),"page-size":g(w).pageSize,"onUpdate:pageSize":l[1]||(l[1]=e=>g(w).pageSize=e),background:!0,layout:"total, sizes, prev, pager, next, jumper",total:U.value,onSizeChange:C,onCurrentChange:C},null,8,["current-page","page-size","total"]),c(q,{modelValue:h.value,"onUpdate:modelValue":l[12]||(l[12]=e=>h.value=e),title:"操作",width:"600"},{footer:m((()=>[V("div",_,[c(a,{onClick:l[11]||(l[11]=e=>h.value=!1)},{default:m((()=>[f("取消")])),_:1}),c(a,{type:"primary",onClick:z},{default:m((()=>[f("确定")])),_:1})])])),default:m((()=>[c(u,{model:g(P),"label-width":"auto",style:{"max-width":"600px"}},{default:m((()=>[c(r,{label:"项目名称-中文名"},{default:m((()=>[c(G,{modelValue:g(P).projectName,"onUpdate:modelValue":l[2]||(l[2]=e=>g(P).projectName=e)},null,8,["modelValue"])])),_:1}),c(r,{label:"项目编码-英文名"},{default:m((()=>[c(G,{modelValue:g(P).projectCode,"onUpdate:modelValue":l[3]||(l[3]=e=>g(P).projectCode=e)},null,8,["modelValue"])])),_:1}),c(r,{label:"服务描述"},{default:m((()=>[c(G,{modelValue:g(P).serverDescribe,"onUpdate:modelValue":l[4]||(l[4]=e=>g(P).serverDescribe=e)},null,8,["modelValue"])])),_:1}),c(r,{label:"项目git地址"},{default:m((()=>[c(G,{modelValue:g(P).projectGitUrl,"onUpdate:modelValue":l[5]||(l[5]=e=>g(P).projectGitUrl=e)},null,8,["modelValue"])])),_:1}),c(r,{label:"项目拉取存放路径"},{default:m((()=>[c(G,{modelValue:g(P).projectPullDepositPath,"onUpdate:modelValue":l[6]||(l[6]=e=>g(P).projectPullDepositPath=e)},null,8,["modelValue"])])),_:1}),c(r,{label:"项目拉取用户名"},{default:m((()=>[c(G,{modelValue:g(P).projectPullUsername,"onUpdate:modelValue":l[7]||(l[7]=e=>g(P).projectPullUsername=e)},null,8,["modelValue"])])),_:1}),c(r,{label:"项目拉取密码"},{default:m((()=>[c(G,{modelValue:g(P).projectPullPassword,"onUpdate:modelValue":l[8]||(l[8]=e=>g(P).projectPullPassword=e)},null,8,["modelValue"])])),_:1}),c(r,{label:"项目服务器端存放路径"},{default:m((()=>[c(G,{modelValue:g(P).projectServerSideDepositPath,"onUpdate:modelValue":l[9]||(l[9]=e=>g(P).projectServerSideDepositPath=e)},null,8,["modelValue"])])),_:1}),c(r,{label:"是否启用"},{default:m((()=>[c(M,{modelValue:g(P).projectState,"onUpdate:modelValue":l[10]||(l[10]=e=>g(P).projectState=e)},{default:m((()=>[c(E,{value:1},{default:m((()=>[f("未启用")])),_:1}),c(E,{value:2},{default:m((()=>[f("已启用")])),_:1}),c(E,{value:3},{default:m((()=>[f("已终止")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{h as default};
