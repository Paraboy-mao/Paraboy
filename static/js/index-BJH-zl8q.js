import{l as e}from"./index-EwfiPtIx.js";import{a}from"./ElementPlus-heS2Cq9L.js";import{l,a as t,Z as o,ah as n,ap as r,m as u,p as d,U as s,O as i,S as p,u as m,P as c,M as v,q as g,T as f}from"./vue-K7LtoPyd.js";import"./axios-dB_UgXDe.js";const _={class:"dialog-footer"},b=l({__name:"index",setup(l){const b=t(!1);let V=o({pageNo:1,pageSize:10}),y=t({});const C=t(0),h=t(!1),S=t([]),j=()=>{var l;y.value.id?(a=>e.post("/versionManagement/updateVersionManagementById",a))(y.value).then((e=>{b.value=!1,z(),a({type:e.data?"success":"error",message:e.data?"修改成功":"修改失败"})})):(l=y.value,e.post("/versionManagement/addVersionManagement",l)).then((e=>{b.value=!1,z(),a({type:e.data?"success":"error",message:e.data?"创建成功":"创建失败"})}))};function w(e){y.value=e.id?{...e}:{},b.value=!0}function z(){var a;h.value=!0,(a=V,e.post("/versionManagement/findVersionManagementPage",a)).then((e=>{S.value=e.data.records,C.value=e.data.total,h.value=!1}))}function M(l){var t;(t={id:l},e.post("/versionManagement/removeVersionManagementById",{},{params:t})).then((e=>{z(),a({type:e.data?"success":"error",message:e.data?"删除成功":"删除失败"})}))}return z(),(e,a)=>{const l=n("el-button"),t=n("el-form-item"),o=n("el-form"),N=n("el-table-column"),U=n("el-popconfirm"),x=n("el-table"),k=n("el-pagination"),D=n("el-input"),P=n("el-radio"),B=n("el-radio-group"),I=n("el-dialog"),q=r("loading");return u(),d("div",null,[s(o,{inline:!0,model:m(V)},{default:i((()=>[s(t,null,{default:i((()=>[s(l,{type:"primary",onClick:z},{default:i((()=>[p("搜索")])),_:1}),s(l,{type:"success",onClick:w},{default:i((()=>[p("新增")])),_:1})])),_:1})])),_:1},8,["model"]),c((u(),v(x,{data:S.value,style:{width:"100%","margin-bottom":"20px"},border:""},{default:i((()=>[s(N,{prop:"projectName",label:"项目名称-中文名",align:"center"}),s(N,{prop:"projectCode",label:"项目编码-英文名",align:"center"}),s(N,{prop:"versionNumber",label:"版本号",align:"center"}),s(N,{prop:"versionDescribe",label:"版本描述",align:"center"}),s(N,{prop:"updateDate",label:"更新时间",align:"center"}),s(N,{label:"状态",align:"center"},{default:i((e=>[g("span",null,f(e.row.versionState?1==e.row.versionState?"未发布":2==e.row.versionState?"已发布":3==e.row.versionState?"已打包":"已回退":e.row.projectState),1)])),_:1}),s(N,{label:"操作",width:"220",align:"center"},{default:i((e=>[s(l,{type:"primary",size:"small",onClick:a=>w(e.row)},{default:i((()=>[p("编辑")])),_:2},1032,["onClick"]),s(U,{title:"Are you sure to delete this?",onConfirm:a=>M(e.row.id)},{reference:i((()=>[s(l,{type:"danger",size:"small"},{default:i((()=>[p("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])),[[q,h.value]]),s(k,{"current-page":m(V).pageNo,"onUpdate:currentPage":a[0]||(a[0]=e=>m(V).pageNo=e),"page-size":m(V).pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>m(V).pageSize=e),background:!0,layout:"total, sizes, prev, pager, next, jumper",total:C.value,onSizeChange:z,onCurrentChange:z},null,8,["current-page","page-size","total"]),s(I,{modelValue:b.value,"onUpdate:modelValue":a[8]||(a[8]=e=>b.value=e),title:"操作",width:"600"},{footer:i((()=>[g("div",_,[s(l,{onClick:a[7]||(a[7]=e=>b.value=!1)},{default:i((()=>[p("取消")])),_:1}),s(l,{type:"primary",onClick:j},{default:i((()=>[p("确定")])),_:1})])])),default:i((()=>[s(o,{model:m(y),"label-width":"auto",style:{"max-width":"600px"}},{default:i((()=>[s(t,{label:"项目名称-中文名"},{default:i((()=>[s(D,{modelValue:m(y).projectName,"onUpdate:modelValue":a[2]||(a[2]=e=>m(y).projectName=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"项目编码-英文名"},{default:i((()=>[s(D,{modelValue:m(y).projectCode,"onUpdate:modelValue":a[3]||(a[3]=e=>m(y).projectCode=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"版本号"},{default:i((()=>[s(D,{modelValue:m(y).versionNumber,"onUpdate:modelValue":a[4]||(a[4]=e=>m(y).versionNumber=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"服务描述"},{default:i((()=>[s(D,{modelValue:m(y).versionDescribe,"onUpdate:modelValue":a[5]||(a[5]=e=>m(y).versionDescribe=e)},null,8,["modelValue"])])),_:1}),s(t,{label:"状态"},{default:i((()=>[s(B,{modelValue:m(y).versionState,"onUpdate:modelValue":a[6]||(a[6]=e=>m(y).versionState=e)},{default:i((()=>[s(P,{value:1},{default:i((()=>[p("未发布")])),_:1}),s(P,{value:2},{default:i((()=>[p("已发布")])),_:1}),s(P,{value:3},{default:i((()=>[p("已打包")])),_:1}),s(P,{value:4},{default:i((()=>[p("已回退")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{b as default};
