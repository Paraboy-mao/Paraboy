import{j as e,k as l,a}from"./ElementPlus-Dxo_w5_G.js";import{s as o,f as t,r as s}from"./sysRole-BUK76lZJ.js";import{g as d,e as r}from"./index-CEXnja5C.js";import{T as u}from"./TableComponent-C512EpHT.js";import{l as n,a as m,Z as i,ah as f,ap as p,m as c,p as y,U as v,O as h,u as _,S as C,P as b,M as V,q as w,T as g,n as x}from"./vue-DiyBcK8j.js";import"./axios-dB_UgXDe.js";const R={class:"dialog-footer"},D=n({__name:"roles",setup(n){const D=m(!1),N=i({roleName:""}),k=m([]);let S=i({sysRoleDo:{roleCode:"",roleName:"",roleStatus:"1"},menuIds:[]});const j=m(!1),I=[{label:"角色名称",field:"roleName",slotName:"text"},{label:"角色编码",field:"roleCode",slotName:"text"},{label:"角色状态",field:"roleStatus",slotName:"roleStatus"},{label:"操作",field:"operation",slotName:"operation",width:200}],U={children:"children",label:"title"},T=m([]),z=m(),P=()=>{var e;S.menuIds=null==(e=z.value)?void 0:e.getCheckedKeys(),o(S).then((e=>{A(),D.value=!1,a({type:e.data?"success":"error",message:e.data?"创建成功":"创建失败"})}))},A=()=>{j.value=!0,t({}).then((e=>{k.value=e.data,j.value=!1}))};async function E(e){e.roleCode?await d({roleCode:e.roleCode}).then((l=>{S.sysRoleDo={...e},S.menuIds=[...l.data]})):(S.sysRoleDo={roleCode:"",roleName:"",roleStatus:"1"},S.menuIds=[]),D.value=!0,x((()=>{z.value.setCheckedKeys(S.menuIds)}))}return A(),r({}).then((e=>{T.value=e.data})),(a,o)=>{const t=f("el-input"),d=f("el-form-item"),r=f("el-button"),n=f("el-form"),m=f("el-card"),i=f("el-popconfirm"),x=f("el-radio"),G=f("el-radio-group"),K=f("el-dialog"),q=p("loading");return c(),y("div",null,[v(m,{shadow:"never",style:{"margin-bottom":"10px"}},{default:h((()=>[v(n,{inline:!0,model:N},{default:h((()=>[v(d,{label:"角色名称"},{default:h((()=>[v(t,{modelValue:N.roleName,"onUpdate:modelValue":o[0]||(o[0]=e=>N.roleName=e),placeholder:"角色名称",clearable:""},null,8,["modelValue"])])),_:1}),v(d,null,{default:h((()=>[v(r,{type:"primary",onClick:A,icon:_(e),loading:j.value},{default:h((()=>[C("搜索")])),_:1},8,["icon","loading"])])),_:1})])),_:1},8,["model"])])),_:1}),b((c(),V(u,{tableData:k.value,column:I,onGetAddorEdit:E,onGetRefresh:A,tableTitle:"角色列表",isShowPaging:!1},{text:h((({scope:e,item:l})=>[w("span",null,g(e.row[l.field]),1)])),roleStatus:h((({scope:e,item:l})=>[w("span",null,g(1==e.row[l.field]?"启用":"停用"),1)])),operation:h((({scope:e,item:l})=>[v(r,{type:"primary",size:"small",onClick:l=>E(e.row)},{default:h((()=>[C("编辑")])),_:2},1032,["onClick"]),v(i,{title:"Are you sure to delete this?",onConfirm:l=>{return a={roleCode:e.row.roleCode},void s(a).then((e=>{A()}));var a}},{reference:h((()=>[v(r,{type:"danger",size:"small"},{default:h((()=>[C("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1},8,["tableData"])),[[q,j.value]]),v(K,{modelValue:D.value,"onUpdate:modelValue":o[5]||(o[5]=e=>D.value=e),title:"新增",width:"600"},{footer:h((()=>[w("div",R,[v(r,{onClick:o[4]||(o[4]=e=>D.value=!1)},{default:h((()=>[C("取消")])),_:1}),v(r,{type:"primary",onClick:P},{default:h((()=>[C("确定")])),_:1})])])),default:h((()=>[v(n,{model:_(S).sysRoleDo,"label-width":"auto",style:{"max-width":"600px"}},{default:h((()=>[v(d,{label:"角色名称"},{default:h((()=>[v(t,{modelValue:_(S).sysRoleDo.roleName,"onUpdate:modelValue":o[1]||(o[1]=e=>_(S).sysRoleDo.roleName=e)},null,8,["modelValue"])])),_:1}),v(d,{label:"角色编码"},{default:h((()=>[v(t,{modelValue:_(S).sysRoleDo.roleCode,"onUpdate:modelValue":o[2]||(o[2]=e=>_(S).sysRoleDo.roleCode=e)},null,8,["modelValue"])])),_:1}),v(d,{label:"角色状态"},{default:h((()=>[v(G,{modelValue:_(S).sysRoleDo.roleStatus,"onUpdate:modelValue":o[3]||(o[3]=e=>_(S).sysRoleDo.roleStatus=e)},{default:h((()=>[v(x,{value:"1"},{default:h((()=>[C("启用")])),_:1}),v(x,{value:"0"},{default:h((()=>[C("停用")])),_:1})])),_:1},8,["modelValue"])])),_:1}),v(d,{label:"角色权限"},{default:h((()=>[v(_(l),{ref_key:"treeRef",ref:z,style:{"max-width":"600px","min-width":"300px"},data:T.value,"show-checkbox":"","node-key":"menuId",props:U},null,8,["data"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{D as default};
